# E2E Testing with Playwright

ã“ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ã¯ã€ãƒ™ãƒˆãƒŠãƒ èªå­¦ç¿’ã‚¢ãƒ—ãƒªã® End-to-End (E2E) ãƒ†ã‚¹ãƒˆãŒå«ã¾ã‚Œã¦ã„ã¾ã™ã€‚

## ğŸ“‹ ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸

### 1. Flashcard Flow (`flashcard-flow.spec.ts`)
- ãƒ•ãƒ©ãƒƒã‚·ãƒ¥ã‚«ãƒ¼ãƒ‰ã®å­¦ç¿’ãƒ•ãƒ­ãƒ¼
- ã‚«ãƒ¼ãƒ‰è¡¨ç¤ºã¨ãƒ•ãƒªãƒƒãƒ—ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
- éŸ³å£°å†ç”Ÿæ©Ÿèƒ½
- å­¦ç¿’ã‚»ãƒƒã‚·ãƒ§ãƒ³å®Œäº†ç”»é¢
- ã‚«ãƒ¼ãƒ‰ã®ã‚¹ã‚­ãƒƒãƒ—æ©Ÿèƒ½

### 2. Quiz Flow (`quiz-flow.spec.ts`)
- æ—¥æœ¬èªâ†’ãƒ™ãƒˆãƒŠãƒ èªã‚¯ã‚¤ã‚º
- ãƒ™ãƒˆãƒŠãƒ èªâ†’æ—¥æœ¬èªã‚¯ã‚¤ã‚º
- ãƒªã‚¹ãƒ‹ãƒ³ã‚°ã‚¯ã‚¤ã‚º
- ã‚¯ã‚¤ã‚ºå®Œäº†ã¨XPç²å¾—
- é–“é•ãˆãŸå•é¡Œã®è¡¨ç¤º
- ã‚«ãƒ†ã‚´ãƒªãƒ¼ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼

### 3. Progress Tracking (`progress-tracking.spec.ts`)
- XPï¼ˆçµŒé¨“å€¤ï¼‰ã®æ›´æ–°
- ç¿’å¾—å˜èªæ•°ã®ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°
- ãƒ¬ãƒ™ãƒ«ã‚¢ãƒƒãƒ—ã‚·ã‚¹ãƒ†ãƒ 
- é€£ç¶šå­¦ç¿’æ—¥æ•°ï¼ˆã‚¹ãƒˆãƒªãƒ¼ã‚¯ï¼‰
- å­¦ç¿’ã‚»ãƒƒã‚·ãƒ§ãƒ³è¨˜éŒ²
- ã‚«ãƒ†ã‚´ãƒªãƒ¼åˆ¥é€²æ—
- æ¬¡ã®ç›®æ¨™è¡¨ç¤º

### 4. Navigation (`navigation.spec.ts`)
- ãƒ˜ãƒƒãƒ€ãƒ¼ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³
- ãƒ•ãƒƒã‚¿ãƒ¼ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³
- ãƒ–ãƒ©ã‚¦ã‚¶ãƒãƒƒã‚¯æ“ä½œ
- ãƒ¢ãƒã‚¤ãƒ«ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³
- ãƒšãƒ¼ã‚¸é–“ã®é€²æ—ä¿æŒ

## ğŸš€ ãƒ†ã‚¹ãƒˆã®å®Ÿè¡Œæ–¹æ³•

### å‰ææ¡ä»¶
```bash
# ä¾å­˜é–¢ä¿‚ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
npm install

# Playwrightãƒ–ãƒ©ã‚¦ã‚¶ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
npx playwright install
```

### ãƒ†ã‚¹ãƒˆã‚³ãƒãƒ³ãƒ‰

```bash
# å…¨ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œï¼ˆãƒ˜ãƒƒãƒ‰ãƒ¬ã‚¹ãƒ¢ãƒ¼ãƒ‰ï¼‰
npm run test:e2e

# UIãƒ¢ãƒ¼ãƒ‰ã§å®Ÿè¡Œï¼ˆãƒ‡ãƒãƒƒã‚°ã«æœ€é©ï¼‰
npm run test:e2e:ui

# ãƒ–ãƒ©ã‚¦ã‚¶ã‚’è¡¨ç¤ºã—ã¦å®Ÿè¡Œ
npm run test:e2e:headed

# ãƒ‡ãƒãƒƒã‚°ãƒ¢ãƒ¼ãƒ‰ã§å®Ÿè¡Œï¼ˆã‚¹ãƒ†ãƒƒãƒ—å®Ÿè¡Œï¼‰
npm run test:e2e:debug

# ãƒ†ã‚¹ãƒˆãƒ¬ãƒãƒ¼ãƒˆã‚’è¡¨ç¤º
npm run test:e2e:report
```

### ç‰¹å®šã®ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‚’å®Ÿè¡Œ

```bash
# Flashcard ãƒ†ã‚¹ãƒˆã®ã¿
npx playwright test flashcard-flow

# Quiz ãƒ†ã‚¹ãƒˆã®ã¿
npx playwright test quiz-flow

# Progress ãƒ†ã‚¹ãƒˆã®ã¿
npx playwright test progress-tracking

# Navigation ãƒ†ã‚¹ãƒˆã®ã¿
npx playwright test navigation
```

### ç‰¹å®šã®ãƒ–ãƒ©ã‚¦ã‚¶ã§å®Ÿè¡Œ

```bash
# Chromiumã®ã¿
npx playwright test --project=chromium

# Firefoxã®ã¿
npx playwright test --project=firefox

# WebKit (Safari) ã®ã¿
npx playwright test --project=webkit

# ãƒ¢ãƒã‚¤ãƒ«Chrome
npx playwright test --project="Mobile Chrome"

# ãƒ¢ãƒã‚¤ãƒ«Safari
npx playwright test --project="Mobile Safari"
```

## ğŸ”§ è¨­å®š

ãƒ†ã‚¹ãƒˆè¨­å®šã¯ `playwright.config.ts` ã«å®šç¾©ã•ã‚Œã¦ã„ã¾ã™ã€‚

ä¸»ãªè¨­å®š:
- **Base URL**: `http://localhost:3000`
- **ãƒ†ã‚¹ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª**: `./e2e`
- **ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ**: ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ30ç§’
- **ãƒªãƒˆãƒ©ã‚¤**: CIç’°å¢ƒã§2å›
- **ãƒ¯ãƒ¼ã‚«ãƒ¼**: CIç’°å¢ƒã§ã¯1ã€ãƒ­ãƒ¼ã‚«ãƒ«ã§ã¯ä¸¦åˆ—å®Ÿè¡Œ
- **ãƒ¬ãƒãƒ¼ãƒˆ**: HTMLå½¢å¼

## ğŸ¤– CI/CD

GitHub Actionsã§è‡ªå‹•å®Ÿè¡Œã•ã‚Œã¾ã™ã€‚

ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼: `.github/workflows/e2e-tests.yml`

ãƒˆãƒªã‚¬ãƒ¼:
- `main`, `develop`, `claude/**` ãƒ–ãƒ©ãƒ³ãƒã¸ã®push
- Pull Requestã®ä½œæˆãƒ»æ›´æ–°

æˆæœç‰©:
- ãƒ†ã‚¹ãƒˆãƒ¬ãƒãƒ¼ãƒˆï¼ˆå¸¸ã«ä¿å­˜ã€30æ—¥é–“ï¼‰
- ãƒ†ã‚¹ãƒˆãƒˆãƒ¬ãƒ¼ã‚¹ï¼ˆå¤±æ•—æ™‚ã®ã¿ã€30æ—¥é–“ï¼‰

## ğŸ“Š ãƒ†ã‚¹ãƒˆçµæœã®ç¢ºèª

### ãƒ­ãƒ¼ã‚«ãƒ«
```bash
# HTMLãƒ¬ãƒãƒ¼ãƒˆã‚’é–‹ã
npm run test:e2e:report
```

### GitHub Actions
1. Actions ã‚¿ãƒ–ã‚’é–‹ã
2. E2E Tests ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚’é¸æŠ
3. å®Ÿè¡Œçµæœã‚’ç¢ºèª
4. å¤±æ•—æ™‚ã¯ Artifacts ã‹ã‚‰ãƒ¬ãƒãƒ¼ãƒˆã‚„ãƒˆãƒ¬ãƒ¼ã‚¹ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰

## ğŸ› ãƒ‡ãƒãƒƒã‚°ã®ãƒ’ãƒ³ãƒˆ

### UIãƒ¢ãƒ¼ãƒ‰ã‚’ä½¿ç”¨
```bash
npm run test:e2e:ui
```
UIãƒ¢ãƒ¼ãƒ‰ã§ã¯ã€ãƒ†ã‚¹ãƒˆã®ã‚¹ãƒ†ãƒƒãƒ—å®Ÿè¡Œã€DOMè¦ç´ ã®æ¤œæŸ»ã€ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ãƒ­ã‚°ã®ç¢ºèªãŒå¯èƒ½ã§ã™ã€‚

### ãƒˆãƒ¬ãƒ¼ã‚¹ãƒ“ãƒ¥ãƒ¼ã‚¢ãƒ¼
```bash
# ãƒˆãƒ¬ãƒ¼ã‚¹ã‚’è¨˜éŒ²
npx playwright test --trace on

# ãƒˆãƒ¬ãƒ¼ã‚¹ã‚’è¡¨ç¤º
npx playwright show-trace trace.zip
```

### ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆ
ãƒ†ã‚¹ãƒˆãŒå¤±æ•—ã™ã‚‹ã¨ã€è‡ªå‹•çš„ã«ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆãŒ `test-results/` ã«ä¿å­˜ã•ã‚Œã¾ã™ã€‚

### ãƒ˜ãƒƒãƒ‰ãƒ¢ãƒ¼ãƒ‰
```bash
npm run test:e2e:headed
```
ãƒ–ãƒ©ã‚¦ã‚¶ã®å‹•ä½œã‚’ç›®è¦–ã§ç¢ºèªã§ãã¾ã™ã€‚

## âœ… ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹

1. **æ˜ç¢ºãªãƒ†ã‚¹ãƒˆå**: ãƒ†ã‚¹ãƒˆãŒä½•ã‚’ãƒ†ã‚¹ãƒˆã—ã¦ã„ã‚‹ã‹æ˜ç¢ºã«ã™ã‚‹
2. **ç‹¬ç«‹æ€§**: å„ãƒ†ã‚¹ãƒˆã¯ä»–ã®ãƒ†ã‚¹ãƒˆã«ä¾å­˜ã—ãªã„
3. **ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—**: å¿…è¦ã«å¿œã˜ã¦ beforeEach/afterEach ã§ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—
4. **å¾…æ©Ÿ**: ãƒšãƒ¼ã‚¸ãƒ­ãƒ¼ãƒ‰ã€ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³å®Œäº†ã‚’é©åˆ‡ã«å¾…ã¤
5. **ã‚¢ã‚µãƒ¼ã‚·ãƒ§ãƒ³**: æœŸå¾…å€¤ã‚’æ˜ç¢ºã«ã™ã‚‹

## ğŸ“ æ–°ã—ã„ãƒ†ã‚¹ãƒˆã®è¿½åŠ 

1. `e2e/` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã« `*.spec.ts` ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆ
2. Playwrightã®ãƒ†ã‚¹ãƒˆãƒ‘ã‚¿ãƒ¼ãƒ³ã«å¾“ã†:
```typescript
import { test, expect } from '@playwright/test';

test.describe('Feature Name', () => {
  test('should do something', async ({ page }) => {
    // ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰
  });
});
```
3. ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œã—ã¦ç¢ºèª
4. ã‚³ãƒŸãƒƒãƒˆå‰ã«å…¨ãƒ†ã‚¹ãƒˆãŒé€šã‚‹ã“ã¨ã‚’ç¢ºèª

## ğŸ”— å‚è€ƒãƒªãƒ³ã‚¯

- [Playwright Documentation](https://playwright.dev/)
- [Next.js Testing Guide](https://nextjs.org/docs/testing)
- [Best Practices](https://playwright.dev/docs/best-practices)
